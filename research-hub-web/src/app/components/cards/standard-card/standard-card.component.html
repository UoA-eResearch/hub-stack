<mat-card
  [routerLink]="['/', contentItem.__typename!.toLowerCase(), contentItem.slug]"
  [ngClass]="{ 'subhub-child-card': isSubhubChild }"
>
  <ng-container
    *ngTemplateOutlet="
      contentItem?.banner ? image : defaultCardImage;
      context: {
        $implicit: contentItem?.banner?.url,
        title: contentItem?.title
      }
    "
  ></ng-container>
  <span class="card-label">{{
    contentItem.__typename! | contentTypeDisplayName
  }}</span>

  <mat-card-title>
    <a
      class="card-title"
      tabindex="-1"
      [routerLink]="[
        '/',
        contentItem.__typename!.toLowerCase(),
        contentItem.slug
      ]"
    >
      <span>{{ contentItem.title }}
        &nbsp;
        <mat-icon *ngIf="contentItem.ssoProtected" matTooltip="SSO Login Required">
          lock
        </mat-icon>
      </span>
    </a>
  </mat-card-title>

  <mat-card-content
    ><span class="card-summary">
      <p>{{ contentItem.summary }}</p>
    </span></mat-card-content
  >
</mat-card>

<!-- Templates -->
<ng-template #image let-url let-title="title">
  <picture>
    <source srcset="{{ url }}?w=1000&fm=webp" type="image/webp" />
    <img mat-card-image src="{{ url }}?w=1000" alt="{{ title }}" />
  </picture>
</ng-template>

<ng-template #defaultCardImage>
  <picture>
    <source
      srcset="{{ defaultImage.get(contentItem.__typename) }}?w=1000&fm=webp"
      type="image/webp"
    />
    <img
      mat-card-image
      src="{{ defaultImage.get(contentItem.__typename) }}?w=1000"
      alt="default background"
    />
  </picture>
</ng-template>
