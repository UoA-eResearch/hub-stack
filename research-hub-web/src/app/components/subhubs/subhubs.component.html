<!-- Displaying all subhubs -->
<app-collection-list *ngIf="allSubHubs$ | async as allSubHubs" [collection]="allSubHubs"></app-collection-list>

<!-- Displaying a singular subhub -->
<div class="results" *ngIf="subhub$ | async as subHubData">

    <div *ngFor="let subhub of subHubData.items; let i = index">

    <div id="breadcrumbs" *ngIf="!!parentSubHubs">
        <span class="breadcrumb-subhub" *ngFor="let parentSubHub of parentSubHubs.slice().reverse()">
            <a [routerLink]="'/subhub/' + parentSubHub.slug">{{ parentSubHub.title }}</a>
        </span>
        <span id="breadcrumb-current-page">{{ subhub.title }}</span>
    </div> 

    <mat-card>
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    JSON Result
                </mat-panel-title>
                <mat-panel-description>Click to see raw JSON</mat-panel-description>
            </mat-expansion-panel-header>
            <pre><code>{{ subHubData | json}}</code></pre>
        </mat-expansion-panel>
    </mat-card>

        <mat-card>
            <mat-card-header>
                <div mat-card-avatar>
                    <mat-icon>build</mat-icon>
                </div>
                <mat-card-title>
                    {{ subhub.title }}
                </mat-card-title>
                <mat-card-subtitle>
                    {{ subhub.summary }}
                </mat-card-subtitle>
            </mat-card-header>
        </mat-card>

        <mat-card>
            <h2>Body</h2>
            <div class="content" *ngFor="let contentItem of subhub.body.json.content as c">
                <mat-card-content *ngIf="contentItem.content[0]">
                    {{ contentItem.content[0].value }}
                </mat-card-content>
            </div>
        </mat-card>

        <mat-card>
            <h2>Pages in this SubHub</h2>
            <app-collection-list *ngIf="subhub.subhubPagesCollection.items" [collection]="subhub.subhubPagesCollection"></app-collection-list>
            <!-- <mat-nav-list>
                <mat-card *ngFor="let subHubChildPage of subhub.subhubPagesCollection.items">
                    <mat-card-header id="title">
                        {{ subHubChildPage.title }}
                        <mat-chip-avatar *ngIf="subHubChildPage.ssoProtected">
                            <mat-icon color="accent" matTooltip="SSO Login Required">lock</mat-icon>
                        </mat-chip-avatar>
                    </mat-card-header>
                    <mat-card-subtitle>
                        {{ subHubChildPage.summary }}
                    </mat-card-subtitle>
                    <div>
                        {{subHubChildPage.__typename}}
                    </div>
                    <a href="/{{subHubChildPage.__typename.toLowerCase()}}/{{subHubChildPage.slug}}">
                        <button mat-stroked-button>
                            View {{subHubChildPage.title}}
                        </button>
                    </a>
                </mat-card>
            </mat-nav-list> -->
        </mat-card>
    </div>
</div>