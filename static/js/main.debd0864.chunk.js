(this["webpackJsonphub-subhub-link-checker"]=this["webpackJsonphub-subhub-link-checker"]||[]).push([[0],{223:function(e,n,t){},521:function(e,n){},784:function(e,n,t){},785:function(e,n,t){"use strict";t.r(n);var i=t(0),o=t(13),a=t(45),s=(t(220),t(221),t(222),t(223),t(16)),r=t(11),c=function(e){return Object(r.jsx)(s.Paragraph,{children:"Hello Page Component"})},l=t(84),u=t(83);t(784);var d=function(e){var n=e.inheritedProps,t=e.sdk,i=t.locales.default;return Object(r.jsx)(u.a,Object(l.a)(Object(l.a)({},n),{},{onLinkExisting:function(e){var o=function(e){return e.field.items&&e.field.items.validations?e.field.items.validations.filter((function(e){return e.hasOwnProperty("linkContentType")})).flatMap((function(e){return e.linkContentType||[]})):[]}(t);t.dialogs.selectMultipleEntries({locale:t.field.locale,contentTypes:o}).then((function(o){if(o&&0!==o.length){var a=t.entry.getSys();return Promise.all(o.map((function(e){return function(e,n,t){return console.log("Checking page reference for subhub ".concat(n.id," and page ").concat(t.id)),n.type===t.type&&n.id===t.id?(console.log("Subhub and page are the same, rejecting."),Promise.resolve(!1)):e.space.getEntries({content_type:"subHub","fields.internalPages.sys.id":t.id,"sys.id[ne]":n.id}).then((function(e){return console.log("Found ".concat(e.items.length," other Subhub(s) that contain this page.")),e.items.length>0&&console.log("Other SubHub(s) containing this page",e.items),0===e.items.length}))}(t,a,e.sys)}))).then((function(a){var s=o.filter((function(e,n){return!a[n]}));if(0!==s.length){var r=1!==o.length,c=s.map((function(e){var n=e.fields.title;return n?n[i]:"(Untitled content)"}));!function(e,n,t){var i=n?"pages":"page",o=t.length>1?"these pages":"this page",a=t.map((function(e){return'"'+e+'"'})).join(", "),s=n?"Some of the existing pages":"The existing page",r=n?"Try adding ".concat(o," to the External Pages field instead: ").concat(a,"."):"Try adding the page to the External Pages field instead.";e.dialogs.openAlert({title:"Adding existing ".concat(i," in SubHub Internal Pages field failed"),message:"".concat(s," you added failed our link check. Pages may only be added to one SubHub's Internal Pages field, and SubHubs may not link to themselves.     The External Pages field does not have these limitations. ").concat(r)})}(t,r,c)}else n.onLinkedExisting(o,e)}))}})).catch((function(e){t.dialogs.openAlert({title:"Error occurred in the SubHub link-checking application",message:"Sorry, an error occurred while adding your page(s) to the SubHub Internal Pages field. Please try again. If problems persist, please message the ResearchHub team for assistance."}),console.log("Error occurred in SubHub link-checking application",e)}))}}))},g=function(e){var n=e.sdk;return Object(i.useEffect)((function(){return n.window.startAutoResizer(),function(){n.window.stopAutoResizer()}}),[n.window]),Object(r.jsx)(u.b,{viewType:"link",hasCardEditActions:!0,sdk:n,isInitiallyDisabled:!0,parameters:{instance:{showCreateEntityAction:!0,showLinkEntityAction:!0}},renderCustomActions:function(e){return Object(r.jsx)(d,{inheritedProps:e,sdk:n})}})},h=function(e){return Object(r.jsx)(s.Paragraph,{children:"Hello Dialog Component"})};Object(a.init)((function(e){var n=document.getElementById("root");[{location:a.locations.LOCATION_ENTRY_FIELD,component:Object(r.jsx)(g,{sdk:e})},{location:a.locations.LOCATION_DIALOG,component:Object(r.jsx)(h,{sdk:e})},{location:a.locations.LOCATION_PAGE,component:Object(r.jsx)(c,{sdk:e})}].forEach((function(t){e.location.is(t.location)&&Object(o.render)(t.component,n)}))}))}},[[785,1,2]]]);
//# sourceMappingURL=main.debd0864.chunk.js.map